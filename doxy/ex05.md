@page ex05 Example 5 â€“ Dialog as main window

![Example 05](ex05.gif)

Programmatically setting the position and size for each child control is tedious, specially when a window has many controls. To make this task more productive, we can use a wl::dialog_main instead of a wl::window_main.

Dialogs have the advantage of being declared in resources scripts, which are `.rc` files generated by resource editors, like [Visual Studio](https://visualstudio.microsoft.com/vs) or [ResEdit](http://www.resedit.net). These editors allow the graphical positioning of controls within your window. Dialogs, however, shouldn't be used to do custom painting.

In this example, the files `my_dialog.rc` and `resource.h` were generated by Visual Studio 2019 Resource Editor.

### my_dialog.rc

````
DLG_MAIN DIALOGEX 0, 0, 203, 47
STYLE DS_SETFONT | DS_MODALFRAME | DS_FIXEDSYS | DS_CENTER | WS_MINIMIZEBOX | WS_POPUP | WS_CAPTION | WS_SYSMENU
CAPTION "My dialog"
FONT 8, "MS Shell Dlg", 400, 0, 0x1
BEGIN
	LTEXT           "&Name",IDC_STATIC,14,10,24,8
	EDITTEXT        TXT_NAME,44,8,142,13,ES_AUTOHSCROLL
	DEFPUSHBUTTON   "&Click me",BTN_CLICKME,136,26,50,14
END
````

### resource.h

````cpp
#define DLG_MAIN                        101
#define TXT_NAME                        1001
#define BTN_CLICKME                     1002
````

### My_Dialog.h

````cpp
#include "winlamb/button.h"
#include "winlamb/dialog_main.h"
#include "winlamb/edit.h"
#include "res/resource.h"

class My_Dialog : public wl::dialog_main {
private:
	wl::edit   txtName{this, TXT_NAME}; // pass control ID to the constructor
	wl::button btnClick{this, BTN_CLICKME};

public:
	My_Dialog();
};
````

### My_Dialog.cpp

````cpp
#include "My_Dialog.h"

RUN(My_Dialog)

My_Dialog::My_Dialog()
{
	setup().dialog_id = DLG_MAIN; // setup() method has different fields

	on().wm_init_dialog([this]()
	{
		// Note that we are handling WM_INITDIALOG instead of WM_CREATE.
		// This is a particularity of dialog windows.

		// Also, instead of calling create() on each control, we call
		// create_children() passing all child controls.
		// That's because position/size are already defined in the resource script.

		create_children({txtName, btnClick});
	});

	btnClick.on().bn_clicked([this]()
	{
		std::wstring name = txtName.text();
		set_title(name);
	});
}
````