@page ex11 Example 11 â€“ Menus and accelerators

![Example 11](ex11.gif)

The window wl::menu_main can be created manually. Each entry must have an command ID, which is used to handle the click events.

Accelerators are keyboard shortcuts, which are managed by a wl::accel_table. They usually duplicate a menu option, thus sharing the same command ID.

In the example below, note how the wl::button was given an specific ID, which is also shared with a menu entry and an accelerator. It means all these events are handled by a single WM_COMMAND message.

### resource.h

````cpp
// Usually this file is generated by a resource editor,
// but it can be generated manually as well.

#define ID_SAY_SOMETHING 1001
#define ID_EXIT          1002
#define ID_HELP          1003
````

### My_Dialog.h

````cpp
#include "winlamb/button.h"
#include "winlamb/window_main.h"
#include "resource.h"

class My_Window : public wl::window_main {
private:
	wl::button btnSay{this, ID_SAY_SOMETHING}; // note the specific ID

public:
	My_Window();

private:
	void create_the_menu(wl::menu& mainMenu);
	void create_the_shortcuts(wl::accel_table& accTbl);
};
````

### My_Dialog.cpp

````cpp
#include "My_Window.h"

RUN(My_Window)

My_Window::My_Window()
{
	setup().title = L"Menus and accelerators";
	setup().style |= WS_MINIMIZEBOX;
	setup().size = {300, 130};
	create_the_menu(setup().main_menu);
	create_the_shortcuts(setup().accel_tbl);

	on().wm_create([this]() {
		btnSay.create(L"Click me", {10, 40}, 80, BS_DEFPUSHBUTTON);
	});

	on().wm_command_accel_menu(ID_SAY_SOMETHING, [this]() {
		set_title(L"Something");
	});

	on().wm_command_accel_menu(ID_EXIT, [this]() {
		SendMessage(hwnd(), WM_CLOSE, 0, 0); // close main window
	});

	on().wm_command_accel_menu(ID_HELP, [this]() {
		set_title(L"Help !!!");
	});
}

void My_Window::create_the_menu(wl::menu& mainMenu)
{
	mainMenu.append_submenu(L"&Person")
		.append_item(ID_SAY_SOMETHING, L"&Say something\tCtrl+P") // notice the \t char
		.append_separator()
		.append_item(ID_EXIT, L"E&xit");

	mainMenu.append_submenu(L"&Help")
		.append_item(ID_HELP, L"&Cry for help\tF1")
		.append_item(ID_SAY_SOMETHING, L"&Say it again\tCtrl+P");
}

void My_Window::create_the_shortcuts(wl::accel_table& accTbl)
{
	accTbl
		.add_key(VK_F1, wl::accel_table::modif::NONE, ID_HELP) // F1
		.add_char('P', wl::accel_table::modif::CTRL, ID_SAY_SOMETHING); // Ctrl+P
}
````